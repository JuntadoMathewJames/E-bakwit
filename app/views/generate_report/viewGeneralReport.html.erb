<style>
  table.customTable {
  width:100%;
  background-color: #FFFFFF;
  border-collapse: collapse;
  border-width: 2px;
  border-color: black;
  border-style: solid;
  color: #000000;
  }

  table.customTable td, table.customTable th {
  border-width: 2px;
  border-color: black;
  border-style: solid;
  padding: 2px;
  }
</style>
<table class="customTable">
  <thead>
    <tr>
      <td >Report Number</td>
      <td colspan="6"></td>
    </tr>
    <tr>
      <td >GENERATED AS OF: </td>
      <td ><%= Time.current %></td>
      <td >GENERATED BY: </td>
      <td><%= User.find(session[:user_id]).full_name %></td>
      <td >EMAIL</td>
      <td ><%= User.find(session[:user_id]).email %></td>
      <td colspan="3">CONTACT#:</td>
      <td colspan="3"><%= User.find(session[:user_id]).cnum %></td>
    </tr>
    <tr>
      <td>INCIDENT NAME</td>
      <td ><%= @disaster.name%></td>
      <td>DISASTER TYPE</td>
      <td ><%= @disaster.disaster_type%></td>
      <td >DATE OF OCCURENCE</td>
      <td ><%= @disaster.date_of_occurence %></td>
    </tr>
    <tr style="background: #9fc5e8">
      <td >NOTED BY</td>
      <td colspan="6"></td>
    </tr>
    <tr align ="center" style="background: #c5e0b3">
      <td rowspan="3">Barangay</td>
      <td colspan="5" rowspan="2">Number of Affected</td>
      <td colspan="4">Number of Displaced Inside ECs</td>
      <td colspan="4">INFANT 1y/o(0-11mos)</td>
      <td colspan="4">TODDLERS 1-3y/o</td>
      <td colspan="4">PRESCHOOLERS 4-5y/o</td>
      <td colspan="4">SCHOOLAGE 6-12y/o</td>
      <td colspan="4">TEENAGE 13-19y/o</td>
      <td colspan="4">ADULT 20-59y/o</td>
      <td colspan="4">SENIOR CITIZEN 60 AND ABOVE</td>
      <td colspan="<%=@essFaciTitles.length + 2%>"></td>
    </tr>
    <tr align ="center" style="background: #c5e0b3">
      <td colspan="2">FAMILIES</td>
      <td colspan="2">PERSONS</td>
      <% for i in 1..7 do %>
        <td colspan="2">MALE</td>
        <td colspan="2">FEMALE</td>
      <%end%>
      <td colspan="2">TOTAL COST OF ASSISTANCE</td>
      <td colspan="<%=@essFaciTitles.length%>">EVACUATION CENTER FACILITIES</td>
    </tr>
    <tr style="background: #c5e0b3">
      <td >EVACUATION CENTER</td>
      <td>COUNT</td>
      <td>FAMILIES</td>
      <td>PERSONS</td>
      <td>4Ps FAMILIES</td>
      <% for i in 1..2 do %>
        <td>CUM</td>
        <td>NOW</td>
      <%end%>
      <% for i in 1..14 do %>
        <td>CUM</td>
        <td>NOW</td>
      <%end%>
      <td>FOOD</td>
      <td>NON-FOOD</td>
      <%@essFaciTitles.each do |faci|%>
        <td><%=faci%></td>
      <%end%>
    </tr>
    <tr style="background: #7f7f7f">
      <td>GRAND TOTAL</td>
      <td><%= EvacCenter.all.length%></td>
      <td><%= @affectedEvac %></td>
      <td><%= @totalfamily%></td>
      <td><%= @totalPersons%></td>
      <td><%= @totalfamily4ps%></td>
      <td><%= @CumFamilies%></td>
      <td><%= @NowFamilies%></td>
      <td><%= @CumPerson%></td>
      <td><%= @NowPerson%></td>
      <td><%= @infantM%></td>
      <td><%= @infantM_now%></td>
      <td><%= @infantF%></td>
      <td><%= @infantF_now%></td>
      <td><%= @toddlerM%></td>
      <td><%= @toddlerM_now%></td>
      <td><%= @toddlerF%></td>
      <td><%= @toddlerF_now%></td>
      <td><%= @preschoolersM%></td>
      <td><%= @preschoolersM_now%></td>
      <td><%= @preschoolersF%></td>
      <td><%= @preschoolersF_now%></td>
      <td><%= @schoolageM%></td>
      <td><%= @schoolageM_now%></td>
      <td><%= @schoolageF%></td>
      <td><%= @schoolageF_now%></td>
      <td><%= @teenageM%></td>
      <td><%= @teenageM_now%></td>
      <td><%= @teenageF%></td>
      <td><%= @teenageF_now%></td>
      <td><%= @adultM%></td>
      <td><%= @adultM_now%></td>
      <td><%= @adultF%></td>
      <td><%= @adultF_now%></td>
      <td><%= @seniorM%></td>
      <td><%= @seniorM_now%></td>
      <td><%= @seniorF%></td>
      <td><%= @seniorF_now%></td>
      <td><%= @tfprice%></td>
      <td><%= @tnfprice%></td>
      <%@essFaciTitles.each do |faci|%>
        <td>&nbsp;</td>
      <%end%>
    </tr>
  </thead>
  <tbody>
    <% @barangays.each do |brgy|%>
      <tr style="background:#a5a5a5">
        <td>
          <%= brgy %>
        </td>
        <% for i in 1..39 + @essFaciTitles.length do %>
          <td>
            &nbsp;
          </td>
        <%end%>
      </tr>
      <% @evac_centers.each do |center| %>
        <% if  brgy == center.barangay %>
          <tr>
            <td>
            </td>
            <td >
              <%= center.name %>
            </td>
            <td>
              <%= countServedFamilyType(zcountServedFamily(center.id, @disaster.id, false)) %>
            </td>
            <td>
              <%= zcountServedFamily(center.id, @disaster.id, false) %>
            </td>
            <td>
              <%= zcountIndivEvacuated(center.id, @disaster.id, false)%>
            </td>
            <td>
              <%= zcountServedFamily4ps(center.id, @disaster.id, false) %>
            </td>
            <td>
              <%= zcountServedFamily(center.id, @disaster.id, false) %>
            </td>
            <td>
              <%= zcountServedFamily(center.id, @disaster.id, true) %>
            </td>
            <td>
              <%= zcountIndivEvacuated(center.id, @disaster.id, false) %>
            </td>
            <td>
              <%= zcountIndivEvacuated(center.id, @disaster.id, true) %>
            </td>
            <td>
              <%= ggetInfants(center.id, @disaster.id, "Male",false) %>
            </td>
            <td>
              <%= ggetInfants(center.id, @disaster.id, "Male", true) %>
            </td>
            <td>
              <%= ggetInfants(center.id, @disaster.id, "Female",false) %>
            </td>
            <td>
              <%= ggetInfants(center.id, @disaster.id, "Female", true) %>
            </td>
            <td>
              <%= ggetToddlers(center.id, @disaster.id, "Male",false) %>
            </td>
            <td>
              <%= ggetToddlers(center.id, @disaster.id, "Male", true) %>
            </td>
            <td>
              <%= ggetToddlers(center.id, @disaster.id, "Female",false) %>
            </td>
            <td>
              <%= ggetToddlers(center.id, @disaster.id, "Female", true) %>
            </td>
            <td>
              <%= ggetPreschoolers(center.id, @disaster.id, "Male",false) %>
            </td>
            <td>
              <%= ggetPreschoolers(center.id, @disaster.id, "Male", true) %>
            </td>
            <td>
              <%= ggetPreschoolers(center.id, @disaster.id, "Female",false) %>
            </td>
            <td>
              <%= ggetPreschoolers(center.id, @disaster.id, "Female", true) %>
            </td>
            <td>
              <%= ggetSchoolagers(center.id, @disaster.id, "Male",false) %>
            </td>
            <td>
              <%= ggetSchoolagers(center.id, @disaster.id, "Male", true) %>
            </td>
            <td>
              <%= ggetSchoolagers(center.id, @disaster.id, "Female",false) %>
            </td>
            <td>
              <%= ggetSchoolagers(center.id, @disaster.id, "Female", true) %>
            </td>
            <td>
              <%= ggetTeenagers(center.id, @disaster.id, "Male",false) %>
            </td>
            <td>
              <%= ggetTeenagers(center.id, @disaster.id, "Male", true) %>
            </td>
            <td>
              <%= ggetTeenagers(center.id, @disaster.id, "Female",false) %>
            </td>
            <td>
              <%= ggetTeenagers(center.id, @disaster.id, "Female", true) %>
            </td>
            <td>
              <%= ggetAdults(center.id, @disaster.id, "Male",false) %>
            </td>
            <td>
              <%= ggetAdults(center.id, @disaster.id, "Male", true) %>
            </td>
            <td>
              <%= ggetAdults(center.id, @disaster.id, "Female",false) %>
            </td>
            <td>
              <%= ggetAdults(center.id, @disaster.id, "Female", true) %>
            </td>
            <td>
              <%= ggetSeniors(center.id, @disaster.id, "Male",false) %>
            </td>
            <td>
              <%= ggetSeniors(center.id, @disaster.id, "Male", true) %>
            </td>
            <td>
              <%= ggetSeniors(center.id, @disaster.id, "Female",false) %>
            </td>
            <td>
              <%= ggetSeniors(center.id, @disaster.id, "Female", true) %>
            </td>
            <td>
              <%=gen_getReliefCost(center.id, @disaster.id,true)%>
            </td>
            <td>
              <%=gen_getReliefCost(center.id, @disaster.id,false)%>
            </td>
            <% getQ = gen_getQuantity(center.id, @disaster) %>
            <% gen_getQuantity(center.id, @disaster).each do |x| %>
              <td>
                <%=x%>
              </td>
            <%end%>
            <% if getQ.length < @essFaciTitles.length%>
              <% for i in getQ..@essFaciTitles-getQ do %>
                <td>
                  &nbsp;
                </td>
              <%end%>
            <%end%>
          </tr>
        <%end%>
      <%end%>
    <%end%>
  </tbody>
</table>
